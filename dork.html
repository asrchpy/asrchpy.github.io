<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>commands.dork API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>commands.dork</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import click
from selenium import webdriver
from selenium.webdriver.firefox.options import Options
from selenium.webdriver.common.by import By
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.support.ui import WebDriverWait
from selenium.common.exceptions import NoSuchElementException, ElementNotVisibleException

import time
import random
from fake_useragent import UserAgent
import logging
from url_normalize import url_normalize
from pprint import pprint
from pathlib import Path
import rich
from rich.logging import RichHandler

import configparser
import threading

import webbrowser

options = Options()

start_time = time.time()

logger = logging.getLogger(name=&#34;dork&#34;)
logger.setLevel(logging.DEBUG)

consoleHandler = logging.StreamHandler()
consoleHandler.setLevel(logging.INFO)

filehandler = logging.FileHandler(&#34;logs.log&#34;)
filehandler.setLevel(logging.DEBUG)

formatterFile = logging.Formatter(
    &#34;%(asctime)s:%(name)s:%(levelname)s:%(message)s&#34;, datefmt=&#34;%d/%m/%Y %I:%M:%S %p&#34;
)
formatter = logging.Formatter(
    &#34;%(asctime)s:%(name)s:%(levelname)s:%(message)s&#34;, datefmt=&#34;%I:%M:%S&#34;
)

consoleHandler.setFormatter(formatter)
filehandler.setFormatter(formatterFile)

logger.addHandler(filehandler)
logger.addHandler(RichHandler())


conf_path = Path(&#34;/home/aaaa/Desktop/Desktop/ASearchNew/src/Configs/config.ini&#34;)


config = configparser.ConfigParser()
config.read(conf_path)
logger.debug(config.sections())

logger.debug(config)


@click.command()
@click.option(&#34;--query&#34;, &#34;-q&#34;, help=&#34;Query to send (pass as STR)&#34;)
@click.option(&#34;--proxy&#34;, &#34;-p&#34;, required=False, help=&#34;Proxy to send request &lt;IP:PORT&gt;&#34;)
@click.pass_obj
def cli(obj, query, proxy):
    &#34;&#34;&#34;
    Send dork query, can be randomly be generated from text files, to generate random dork pass &#34;g&#34;
    &#34;&#34;&#34;


    def search_google():

        ua = UserAgent()

        useragent = ua.random

        logger.info(f&#34;Sending {query}&#34;)
        logger.info(&#34;Opening Driver&#34;)

        options.add_argument(f&#34;user-agent={useragent}&#34;)
        options.page_load_strategy = &#34;none&#34;
        options.add_argument(&#34;--headless&#34;)

        driver = webdriver.Firefox(options=options)

        def scroll_down():
            last_height = driver.execute_script(&#34;return document.body.scrollHeight&#34;)

            while True:
                driver.execute_script(&#34;window.scrollTo(0, document.body.scrollHeight);&#34;)

                time.sleep(2)

                new_height = driver.execute_script(&#34;return document.body.scrollHeight&#34;)

                if new_height == last_height:
                    break

                last_height = new_height

        url2 = &#34;https://www.google.com/search&#34;

        driver.get(url2)

        &#34;&#34;&#34; 
        Find search box element text_area
        Send query to text_area element
        &#34;&#34;&#34;
        try:
            WebDriverWait(driver, 20)
            text_area = driver.find_element(By.CLASS_NAME, &#34;gLFyf&#34;)
            time.sleep(random.randrange(0, 2))

            text_area.send_keys(query)

            time.sleep(random.randrange(0, 2))
            text_area.send_keys(Keys.ENTER)
        except NoSuchElementException as NSE:
            logger.error(&#39;Could not find search bar. &#39;, str(NSE))
            driver.quit()
        except ElementNotVisibleException as ENVE: 
            logger.error(&#39;Element not visible in DOM. &#39;, str(ENVE))
            driver.quit()
        finally:
            logger.debug(&#34;\t|-&gt; Continuing&#34;)

        logger.info(&#34;scroll&#34;)
        scroll_down()

        displ = driver.find_elements(By.TAG_NAME, &#34;cite&#34;)
        lnks = driver.find_elements(By.XPATH, &#34;//a[@href]&#34;)

        for lnk, dis in zip(lnks, displ):
            urlStr = lnk.get_attribute(&#34;href&#34;)
            disStr = dis.text

            normalizedOutput = url_normalize(urlStr)
            blackList = [
                &#34;spreadprivacy&#34;,
                &#34;javascript:&#34;,
                &#34;bing&#34;,
                &#34;bingj&#34;,
                &#34;yahoo&#34;,
                &#34;google&#34;,
                &#34;duckduckgo&#34;,
            ]

            if not any(val in disStr for val in blackList) and not any(
                val in urlStr for val in blackList
            ):
                disStrURL = disStr.replace(&#34;https://&#34;, &#34;&#34;).replace(&#34;www.&#34;, &#34;&#34;)
                disStrTitle = (
                    disStr.replace(&#34;http://&#34;, &#34;(UNSECURE SITE) http://&#34;)
                    .replace(&#34;https://&#34;, &#34;&#34;)
                    .replace(&#34;www.&#34;, &#34;&#34;)
                )
                f.write(
                    f&#39;&lt;a  href=&#34;{urlStr}&#34;&gt; {urlStr.replace(&#34;http://&#34;, &#34;(UNSECURE SITE) http://&#34;).replace(&#34;https://&#34;, &#34;&#34;).replace(&#34;www.&#34;, &#34;&#34;).replace(&#34;/&#34;, &#34; &#34;)} &lt;/a&gt;  &lt;br/&gt;  &lt;sup&gt;{urlStr}&lt;/sup&gt;&lt;br/&gt;&lt;br/&gt;&#39;
                )

        driver.close()
        driver.quit()
        
        logger.info(&#34;Driver quit&#34;)
        logger.info(&#34;Deleted all cookies&#34;)

    t1 = threading.Thread(target=search_google)
    t2 = threading.Thread(target=search_ddg)

    t1.start()
    t2.start()


    t1.join()
    t2.join()


    print(&#34;--- Done in %s seconds ---&#34; % (time.time() - start_time))
    f.close()
    url = r&#34;C:\Users\14235\Desktop\ASearch\src\A6.html&#34;
    webbrowser.open_new(url)


if __name__ == &#34;__main__&#34;:
    logger.error(r&#34;Please run &#39;ASearch\src\&#39; directory&#34;)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="commands" href="index.html">commands</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>